<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MonadORE - PoW Mining</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #0a0e27;
            color: #00ff41;
            overflow-x: hidden;
            position: relative;
        }

        #matrix {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 0;
            opacity: 0.15;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            border: 2px solid #00ff41;
            padding: 25px;
            margin-bottom: 30px;
            background: rgba(0, 255, 65, 0.03);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
            position: relative;
        }

        h1 {
            font-size: 48px;
            text-shadow: 0 0 10px #00ff41, 0 0 20px #00ff41;
            letter-spacing: 4px;
            display: inline-block;
        }

        .wallet-btn {
            float: right;
            background: transparent;
            border: 2px solid #00ff41;
            color: #00ff41;
            padding: 12px 25px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            transition: all 0.3s;
        }

        .wallet-btn:hover {
            background: #00ff41;
            color: #0a0e27;
            box-shadow: 0 0 20px #00ff41;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-box {
            border: 1px solid #00ff41;
            padding: 20px;
            background: rgba(0, 0, 0, 0.6);
            position: relative;
        }

        .stat-box::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00ff41, transparent, #00ff41);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .stat-box:hover::before {
            opacity: 1;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.7;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            text-shadow: 0 0 10px #00ff41;
        }

        .mining-zone {
            border: 2px solid #00ff41;
            padding: 40px;
            background: rgba(0, 0, 0, 0.7);
            margin-bottom: 30px;
        }

        .terminal {
            background: #000;
            border: 1px solid #00ff41;
            padding: 20px;
            min-height: 150px;
            margin-bottom: 20px;
            font-size: 14px;
            overflow-y: auto;
            max-height: 300px;
        }

        .terminal-line {
            margin-bottom: 5px;
        }

        .terminal-line::before {
            content: '> ';
            color: #00ff41;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 20px;
            background: transparent;
            border: 2px solid #00ff41;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .btn:hover:not(:disabled) {
            background: #00ff41;
            color: #0a0e27;
            box-shadow: 0 0 30px #00ff41;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .btn.mining {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px #00ff41; }
            50% { box-shadow: 0 0 40px #00ff41; }
        }

        .hashrate-display {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 255, 65, 0.05);
            border-left: 3px solid #00ff41;
        }

        .info-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .info-box {
            border: 1px solid #00ff41;
            padding: 25px;
            background: rgba(0, 0, 0, 0.6);
        }

        .info-box h3 {
            margin-bottom: 15px;
            font-size: 20px;
        }

        .info-item {
            margin-bottom: 12px;
            padding-left: 15px;
            border-left: 2px solid #00ff41;
        }

        footer {
            text-align: center;
            padding: 30px;
            border-top: 1px solid #00ff41;
            margin-top: 50px;
            opacity: 0.7;
        }

        footer a {
            color: #00ff41;
            text-decoration: none;
            text-shadow: 0 0 5px #00ff41;
        }

        footer a:hover {
            text-shadow: 0 0 15px #00ff41;
        }

        .glitch {
            position: relative;
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        .scan-line {
            position: fixed;
            width: 100%;
            height: 2px;
            background: rgba(0, 255, 65, 0.5);
            box-shadow: 0 0 10px #00ff41;
            animation: scan 4s linear infinite;
            z-index: 9999;
            pointer-events: none;
        }

        @keyframes scan {
            from { top: 0; }
            to { top: 100%; }
        }

        @media (max-width: 768px) {
            .info-section {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 32px;
            }
            
            .wallet-btn {
                float: none;
                display: block;
                margin-top: 15px;
            }
        }

        .blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="scan-line"></div>
    <canvas id="matrix"></canvas>

    <div class="container">
        <header>
            <h1 class="glitch">MONADORE</h1>
            <button class="wallet-btn" onclick="connectWallet()">CONNECT WALLET</button>
            <div style="clear: both; margin-top: 15px;">
                <small>PROOF-OF-WORK MINING PROTOCOL</small>
            </div>
        </header>

        <div class="stats-grid">
            <div class="stat-box">
                <div class="stat-label">YOUR BALANCE</div>
                <div class="stat-value" id="balance">0.0000</div>
                <div class="stat-label">ORE</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">UNCLAIMED REWARDS</div>
                <div class="stat-value" id="unclaimed">0.0000</div>
                <div class="stat-label">ORE</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">TOTAL MINED</div>
                <div class="stat-value" id="totalSupply">0.00</div>
                <div class="stat-label">/ 21M ORE</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">DIFFICULTY</div>
                <div class="stat-value" id="difficulty">0</div>
                <div class="stat-label">LEADING ZEROS</div>
            </div>
        </div>

        <div class="mining-zone">
            <h2 style="margin-bottom: 20px;">&gt;&gt; MINING TERMINAL</h2>
            
            <div class="hashrate-display">
                <div>
                    <strong>HASH RATE:</strong> <span id="hashrate">0</span> H/s
                </div>
                <div>
                    <strong>COOLDOWN:</strong> <span id="cooldown" class="blink">READY</span>
                </div>
            </div>

            <div class="terminal" id="terminal">
                <div class="terminal-line">System initialized...</div>
                <div class="terminal-line">Awaiting connection...</div>
            </div>

            <div class="controls">
                <button class="btn" id="mineBtn" onclick="startMining()">START MINING</button>
                <button class="btn" id="claimBtn" onclick="claimRewards()">CLAIM REWARDS</button>
            </div>
        </div>

        <div class="info-section">
            <div class="info-box">
                <h3>&gt; PROTOCOL INFO</h3>
                <div class="info-item">
                    <strong>CONTRACT:</strong><br>
                    <small style="word-break: break-all;">0x7Aa87dFeFC4E07EdB718bb0f7e0F18103ab3d415</small>
                </div>
                <div class="info-item">
                    <strong>NETWORK:</strong> Monad Testnet
                </div>
                <div class="info-item">
                    <strong>ALGORITHM:</strong> Keccak256 PoW
                </div>
                <div class="info-item">
                    <strong>MIN INTERVAL:</strong> 10 seconds
                </div>
            </div>

            <div class="info-box">
                <h3>&gt; HOW TO MINE</h3>
                <div class="info-item">
                    [1] Connect MetaMask wallet
                </div>
                <div class="info-item">
                    [2] Click START MINING
                </div>
                <div class="info-item">
                    [3] Wait for valid hash discovery
                </div>
                <div class="info-item">
                    [4] Claim accumulated rewards
                </div>
            </div>
        </div>

        <footer>
            <p>CREATED BY <a href="https://x.com/ega_2ez4crypto" target="_blank">@ega_2ez4crypto</a></p>
            <p style="margin-top: 10px; font-size: 12px;">MONADORE v1.0 - DECENTRALIZED MINING</p>
        </footer>
    </div>

    <script>
        var CONTRACT_ADDRESS = '0x7Aa87dFeFC4E07EdB718bb0f7e0F18103ab3d415';
        var RPC_URL = 'https://testnet-rpc.monad.xyz';
        var ABI = [
            "function mine(uint256 nonce) external",
            "function claimRewards() external",
            "function getMinerInfo(address miner) external view returns (uint256 balance, uint256 unclaimed, uint256 lastMine, uint256 nextMineTime)",
            "function getStats() external view returns (uint256 supply, uint256 diff, uint256 reward, uint256 maxSupply)",
            "function totalSupply() external view returns (uint256)",
            "function difficulty() external view returns (uint256)"
        ];

        var account = null;
        var mining = false;
        var hashCount = 0;
        var startTime = 0;

        var canvas = document.getElementById('matrix');
        var ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        var chars = '01ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var fontSize = 14;
        var columns = canvas.width / fontSize;
        var drops = [];
        for (var i = 0; i < Math.floor(columns); i++) {
            drops[i] = 1;
        }

        function drawMatrix() {
            ctx.fillStyle = 'rgba(10, 14, 39, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#00ff41';
            ctx.font = fontSize + 'px monospace';

            for (var i = 0; i < drops.length; i++) {
                var text = chars[Math.floor(Math.random() * chars.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 33);

        window.addEventListener('resize', function() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        function log(msg) {
            var terminal = document.getElementById('terminal');
            var line = document.createElement('div');
            line.className = 'terminal-line';
            line.textContent = msg;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }

        async function connectWallet() {
            try {
                if (typeof window.ethereum === 'undefined') {
                    log('ERROR: MetaMask not detected');
                    alert('Please install MetaMask');
                    return;
                }

                var accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });

                try {
                    await window.ethereum.request({
                        method: 'wallet_addEthereumChain',
                        params: [{
                            chainId: '0xCAA3',
                            chainName: 'Monad Testnet',
                            nativeCurrency: { name: 'MON', symbol: 'MON', decimals: 18 },
                            rpcUrls: [RPC_URL],
                            blockExplorerUrls: ['https://explorer.testnet.monad.xyz']
                        }]
                    });
                } catch (e) {
                    console.log('Chain already added');
                }

                account = accounts[0];
                document.querySelector('.wallet-btn').textContent = account.slice(0, 6) + '...' + account.slice(-4);
                log('Wallet connected: ' + account.slice(0, 10) + '...');
                loadData();
                setInterval(loadData, 5000);
            } catch (error) {
                log('ERROR: ' + error.message);
            }
        }

        async function loadData() {
            if (!account) return;
            
            try {
                var provider = new ethers.providers.Web3Provider(window.ethereum);
                var contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, provider);

                var minerInfo = await contract.getMinerInfo(account);
                var stats = await contract.getStats();

                document.getElementById('balance').textContent = parseFloat(ethers.utils.formatEther(minerInfo[0])).toFixed(4);
                document.getElementById('unclaimed').textContent = parseFloat(ethers.utils.formatEther(minerInfo[1])).toFixed(4);
                document.getElementById('totalSupply').textContent = parseFloat(ethers.utils.formatEther(stats[0])).toFixed(2);
                document.getElementById('difficulty').textContent = stats[1].toString();

                var now = Math.floor(Date.now() / 1000);
                var cooldown = Math.max(0, minerInfo[3].toNumber() - now);
                
                if (cooldown > 0) {
                    document.getElementById('cooldown').textContent = cooldown + 's';
                    document.getElementById('mineBtn').disabled = true;
                } else {
                    document.getElementById('cooldown').textContent = 'READY';
                    document.getElementById('mineBtn').disabled = false;
                }

                var unclaimedVal = parseFloat(ethers.utils.formatEther(minerInfo[1]));
                document.getElementById('claimBtn').disabled = unclaimedVal === 0;
            } catch (error) {
                console.error('Load error:', error);
            }
        }

        async function startMining() {
            if (!account) {
                log('ERROR: Connect wallet first');
                return;
            }

            mining = true;
            hashCount = 0;
            startTime = Date.now();
            document.getElementById('mineBtn').disabled = true;
            document.getElementById('mineBtn').classList.add('mining');
            
            log('Mining started...');

            try {
                var provider = new ethers.providers.Web3Provider(window.ethereum);
                var signer = provider.getSigner();
                var contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);

                var mine = async function() {
                    if (!mining) return;

                    var nonce = Math.floor(Math.random() * 1000000000);
                    hashCount++;
                    
                    var elapsed = (Date.now() - startTime) / 1000;
                    var rate = Math.floor(hashCount / elapsed);
                    document.getElementById('hashrate').textContent = rate;

                    try {
                        log('Attempting nonce: ' + nonce);
                        var tx = await contract.mine(nonce, { gasLimit: 300000 });
                        log('Transaction sent: ' + tx.hash.slice(0, 10) + '...');
                        await tx.wait();
                        log('SUCCESS! Block mined.');
                        mining = false;
                        document.getElementById('mineBtn').classList.remove('mining');
                        loadData();
                    } catch (error) {
                        if (error.message.includes('Invalid hash')) {
                            setTimeout(mine, 50);
                        } else {
                            log('ERROR: ' + error.message.substring(0, 80));
                            mining = false;
                            document.getElementById('mineBtn').classList.remove('mining');
                        }
                    }
                };

                mine();
            } catch (error) {
                log('ERROR: ' + error.message);
                mining = false;
                document.getElementById('mineBtn').classList.remove('mining');
            }
        }

        async function claimRewards() {
            if (!account) return;
            
            document.getElementById('claimBtn').disabled = true;
            log('Claiming rewards...');

            try {
                var provider = new ethers.providers.Web3Provider(window.ethereum);
                var signer = provider.getSigner();
                var contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);

                var tx = await contract.claimRewards();
                log('Transaction sent: ' + tx.hash.slice(0, 10) + '...');
                await tx.wait();
                log('Rewards claimed successfully!');
                loadData();
            } catch (error) {
                log('ERROR: ' + error.message);
            }
        }
    </script>
</body>
</html>
